% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/item_selection.R
\name{select_next_item}
\alias{select_next_item}
\title{Select Next Item Using TAM-Based Information}
\usage{
select_next_item(rv, item_bank, config)
}
\arguments{
\item{rv}{Reactive values object containing current test state. Required components:
\describe{
  \item{administered}{Integer vector of administered item indices}
  \item{responses}{Numeric vector of participant responses}
  \item{current_ability}{Current ability estimate from TAM}
  \item{ability_se}{Standard error of current ability estimate}
  \item{item_info_cache}{Cached item information values (optional)}
  \item{item_counter}{Integer count of administered items}
  \item{session_start}{POSIXct timestamp of session start}
  \item{exposure_rates}{Numeric vector tracking item exposure (optional)}
}}

\item{item_bank}{Data frame containing item parameters compatible with TAM. 
Structure varies by IRT model:
\describe{
  \item{Question}{Character vector of item content or identifiers}
  \item{a}{Numeric vector of discrimination parameters (2PL, 3PL, GRM)}
  \item{b, b1, b2, ...}{Numeric vectors of difficulty/threshold parameters}
  \item{c}{Numeric vector of guessing parameters (3PL only)}
  \item{ResponseCategories}{Character vector of response options (GRM)}
  \item{Content_Area}{Character vector for content balancing (optional)}
  \item{Exposure_Target}{Numeric vector of target exposure rates (optional)}
}}

\item{config}{Study configuration object from \code{\link{create_study_config}}. 
Key selection parameters:
\describe{
  \item{criteria}{Selection criterion: "MI", "RANDOM", "WEIGHTED", "MFI"}
  \item{model}{IRT model specification for TAM}
  \item{max_session_duration}{Session timeout in minutes}
  \item{adaptive}{Logical indicating adaptive vs. fixed selection}
  \item{fixed_items}{Integer vector of required items}
  \item{item_groups}{Named list of item groupings}
  \item{content_balancing}{Logical for content area balancing}
  \item{exposure_control}{Logical for exposure rate control}
}}
}
\value{
Integer index of the selected item from the item bank, or \code{NULL} if 
  no suitable item is available. Returns \code{NULL} when:
  \itemize{
    \item Session timeout has been reached
    \item All items have been administered
    \item Stopping criteria have been met
    \item No items meet content balancing constraints
  }
}
\description{
Selects the next item for administration based on information calculations from TAM.
This function serves as an interface layer that uses ability estimates from TAM
to determine optimal item selection according to various psychometric criteria.
All information calculations utilize TAM's IRT implementations.
}
\details{
\strong{TAM Integration for Item Selection:} This function implements adaptive item
selection using ability estimates and item information calculations from TAM:

\strong{Information Calculation Pipeline:}
\itemize{
  \item Uses current ability estimate from TAM functions (\code{TAM::tam.wle}, \code{TAM::tam.eap}).
  \item Calculates item information using TAM's \code{TAM::IRT.informationCurves}.
  \item Applies selection criteria based on psychometric principles
  \item Returns item index for \code{inrep} workflow management
}

\strong{Selection Criteria Implementation:}
\describe{
  \item{\strong{MI (Maximum Information)}}{
    Selects item with highest Fisher information at current ability estimate.
    Optimal for measurement precision and standard error minimization.
    Uses TAM's information function calculations.
  }
  \item{\strong{MFI (Maximum Fisher Information)}}{
    Alternative implementation of information-based selection.
    Includes additional considerations for model-specific information.
  }
  \item{\strong{WEIGHTED}}{
    Combines information maximization with content balancing and exposure control.
    Implements Sympson-Hetter exposure control when configured.
    Balances psychometric efficiency with practical constraints.
  }
  \item{\strong{RANDOM}}{
    Random selection from available items for comparison studies.
    Useful for evaluating adaptive testing benefits.
  }
}

\strong{Content Balancing Features:}
\itemize{
  \item Supports content area constraints through \code{item_groups} specification
  \item Implements proportional content sampling across domains
  \item Maintains psychometric efficiency while meeting content requirements
  \item Provides real-time content coverage monitoring
}

\strong{Exposure Control Mechanisms:}
\itemize{
  \item Tracks item exposure rates across sessions
  \item Implements Sympson-Hetter exposure control algorithm
  \item Supports target exposure rate specifications
  \item Balances item security with measurement precision
}

\strong{Adaptive Testing Logic:}
\itemize{
  \item Handles fixed item requirements (anchor items, pretests)
  \item Supports delayed adaptive start after initial fixed items
  \item Implements stopping rules based on precision or item count
  \item Provides session timeout protection
}

\strong{Performance Optimization:}
\itemize{
  \item Caches item information calculations for efficiency
  \item Implements incremental information updates
  \item Minimizes TAM function calls through intelligent caching
  \item Supports parallel processing for large item banks
}

\strong{Quality Assurance:}
\itemize{
  \item Validates item availability and constraints
  \item Handles edge cases (no available items, timeout)
  \item Provides comprehensive logging of selection decisions
  \item Implements graceful degradation for unusual scenarios
}

\strong{Model-Specific Considerations:}
\describe{
  \item{\strong{1PL/Rasch}}{Information depends only on item difficulty relative to ability}
  \item{\strong{2PL}}{Information varies by both difficulty and discrimination}
  \item{\strong{3PL}}{Information affected by guessing parameter, especially at low ability}
  \item{\strong{GRM}}{Information calculated across response categories and thresholds}
}

All information calculations utilize TAM's validated IRT implementations.
\code{inrep} provides the selection logic, constraint management, and workflow integration.
\itemize{
  \item Maintains proportional representation across content areas
  \item Prevents over-selection from any single domain
  \item Ensures comprehensive coverage of construct
}

\strong{Exposure Control:} Automatic exposure rate management:
\itemize{
  \item Tracks item usage frequencies
  \item Implements Sympson-Hetter method for exposure control
  \item Prevents overexposure of high-information items
}

\code{inrep} provides the selection logic and workflow coordination, while all
psychometric computations rely on TAM's validated implementations.
}
\examples{
\dontrun{
# Load sample data
library(inrep)
data(bfi_items)

# Create configuration
config <- create_study_config(
  model = "GRM", 
  criteria = "MI",
  max_items = 15,
  min_SEM = 0.3
)

# Initialize response data
rv <- list(
  administered = c(1, 5, 12),
  responses = c(3, 4, 2),
  current_ability = 0.5,
  item_info_cache = list(),
  item_counter = 3,
  session_start = Sys.time()
)

# Select next item
next_item <- select_next_item(rv, bfi_items, config)
cat("Selected item:", next_item, "\n")

# Content-balanced selection
config_balanced <- create_study_config(
  model = "GRM",
  criteria = "WEIGHTED",
  item_groups = list(
    "Extraversion" = 1:10,
    "Agreeableness" = 11:20, 
    "Conscientiousness" = 21:30
  )
)

next_item_balanced <- select_next_item(rv, bfi_items, config_balanced)
}

}
\references{
Robitzsch A, Kiefer T, Wu M (2024). TAM: Test Analysis Modules. R package version 4.2-21, https://CRAN.R-project.org/package=TAMst Analysis Modules. 
R package version 3.5-19. \url{https://CRAN.R-project.org/package=TAM}

van der Linden, W. J. (2010). Elements of adaptive testing. 
In W. J. van der Linden & C. A. W. Glas (Eds.), Elements of adaptive testing (pp. 3-30). Springer.

Sympson, J. B., & Hetter, R. D. (1985). Controlling item-exposure rates in computerized 
adaptive testing. Proceedings of the 27th annual meeting of the Military Testing Association (pp. 973-977).
}
\seealso{
\code{\link{estimate_ability}}, \code{\link{create_study_config}}, 
  \code{\link{launch_study}}
}
\keyword{adaptive}
\keyword{item}
\keyword{psychometrics}
\keyword{selection}
\keyword{testing}
