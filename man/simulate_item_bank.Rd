% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/bfi_items.R
\name{simulate_item_bank}
\alias{simulate_item_bank}
\title{Simulate Adaptive Testing Performance on Item Bank}
\usage{
simulate_item_bank(item_bank, model = "GRM", n = 100)
}
\arguments{
\item{item_bank}{Data frame containing item parameters compatible with TAM.
Must include all required columns for the specified IRT model.}

\item{model}{Character string specifying IRT model for simulation.
Options: "GRM", "2PL", "1PL", "3PL". Default is "GRM".}

\item{n}{Integer specifying number of simulated participants. Default is 100.}

\item{ability_range}{Numeric vector of length 2 specifying the range of simulated
abilities. Default is c(-3, 3).}

\item{max_items}{Integer specifying maximum items per simulated assessment.
Default is 20.}
}
\value{
List containing comprehensive simulation results:
\describe{
  \item{\code{participants}}{List of individual participant results}
  \item{\code{summary}}{Summary statistics across all participants}
  \item{\code{item_usage}}{Item usage frequency across simulations}
  \item{\code{ability_recovery}}{Ability estimation accuracy metrics}
  \item{\code{convergence}}{Convergence statistics for TAM estimation}
}
}
\description{
Runs comprehensive simulation to validate item bank performance and assess the quality
of adaptive testing algorithms. This function generates realistic assessment scenarios
to evaluate item bank effectiveness and identify potential issues before deployment.
}
\details{
This function provides comprehensive validation of item bank performance:

\strong{Simulation Process:}
\itemize{
  \item Generates diverse ability levels across specified range
  \item Simulates realistic response patterns based on IRT model
  \item Applies adaptive testing algorithms
  \item Evaluates estimation accuracy and efficiency
}

\strong{Validation Metrics:}
\itemize{
  \item Ability estimation bias and precision
  \item Item usage patterns and exposure rates
  \item Assessment length and efficiency
  \item Convergence rates for TAM procedures
}

\strong{Quality Indicators:}
\itemize{
  \item Root mean square error (RMSE) for ability estimation
  \item Correlation between true and estimated abilities
  \item Item bank coverage and utilization balance
  \item Stopping criteria effectiveness
}
}
\examples{
\dontrun{
# Example 1: Basic Simulation
library(inrep)
data(bfi_items)

# Run simulation with default parameters
simulation_results <- simulate_item_bank(bfi_items, model = "GRM", n = 50)

# View summary statistics
print(simulation_results$summary)

# Example 2: Comprehensive Validation
# Larger simulation for research validation
large_simulation <- simulate_item_bank(
  item_bank = bfi_items,
  model = "GRM",
  n = 200,
  ability_range = c(-2.5, 2.5),
  max_items = 25
)

# Analyze ability recovery
ability_recovery <- large_simulation$ability_recovery
cat("Ability Recovery Statistics:\n")
cat("RMSE:", round(ability_recovery$rmse, 3), "\n")
cat("Correlation:", round(ability_recovery$correlation, 3), "\n")
cat("Mean Bias:", round(ability_recovery$bias, 3), "\n")

# Example 3: Model Comparison
# Compare different IRT models
models <- c("GRM", "2PL", "1PL")
model_results <- list()

for (model in models) {
  cat("Simulating", model, "model...\n")
  
  # Prepare appropriate item bank
  if (model == "GRM") {
    test_bank <- bfi_items
  } else {
    # Create binary item bank for 2PL/1PL
    test_bank <- data.frame(
      Question = paste("Binary Item", 1:20),
      a = if (model == "1PL") rep(1, 20) else runif(20, 0.5, 2.0),
      b = runif(20, -2, 2),
      Answer = sample(c("A", "B", "C", "D"), 20, replace = TRUE)
    )
  }
  
  model_results[[model]] <- simulate_item_bank(
    test_bank, model = model, n = 100
  )
}

# Compare model performance
cat("Model Comparison:\n")
for (model in models) {
  recovery <- model_results[[model]]$ability_recovery
  cat(sprintf("\%-5s: RMSE = \%.3f, r = \%.3f\n", 
              model, recovery$rmse, recovery$correlation))
}

# Example 4: Item Usage Analysis
# Analyze item exposure patterns
analyze_item_usage <- function(simulation_results) {
  usage <- simulation_results$item_usage
  cat("Item Usage Analysis:\n")
  cat("====================\n")
  cat("Total items:", length(usage), "\n")
  cat("Items used:", sum(usage > 0), "\n")
  cat("Items unused:", sum(usage == 0), "\n")
  cat("Mean usage:", round(mean(usage), 2), "\n")
  cat("Usage range:", range(usage), "\n")
  
  # Identify over/under-used items
  overused <- which(usage > quantile(usage, 0.95))
  underused <- which(usage < quantile(usage, 0.05))
  
  cat("Overused items (>95th percentile):", length(overused), "\n")
  cat("Underused items (<5th percentile):", length(underused), "\n")
  
  return(list(overused = overused, underused = underused))
}

# Analyze usage patterns
usage_analysis <- analyze_item_usage(simulation_results)

# Example 5: Adaptive Testing Efficiency
# Evaluate adaptive testing efficiency
evaluate_efficiency <- function(simulation_results) {
  participants <- simulation_results$participants
  
  # Extract assessment lengths
  lengths <- sapply(participants, function(p) length(p$responses))
  
  # Extract final standard errors
  se_values <- sapply(participants, function(p) p$final_se)
  
  cat("Adaptive Testing Efficiency:\n")
  cat("============================\n")
  cat("Mean assessment length:", round(mean(lengths), 1), "items\n")
  cat("Length range:", range(lengths), "items\n")
  cat("Mean final SE:", round(mean(se_values, na.rm = TRUE), 3), "\n")
  cat("SE range:", round(range(se_values, na.rm = TRUE), 3), "\n")
  
  # Efficiency metric: precision per item
  efficiency <- 1 / (se_values * lengths)
  cat("Mean efficiency:", round(mean(efficiency, na.rm = TRUE), 3), "\n")
  
  return(list(
    mean_length = mean(lengths),
    mean_se = mean(se_values, na.rm = TRUE),
    efficiency = mean(efficiency, na.rm = TRUE)
  ))
}

# Evaluate efficiency
efficiency_metrics <- evaluate_efficiency(simulation_results)

# Example 6: Simulation Report Generation
# Generate comprehensive simulation report
generate_simulation_report <- function(simulation_results, filename = "simulation_report.txt") {
  cat("TAM-Based Item Bank Simulation Report\n", file = filename)
  cat("=====================================\n", file = filename, append = TRUE)
  cat("Generated:", format(Sys.time()), "\n\n", file = filename, append = TRUE)
  
  # Summary statistics
  summary_stats <- simulation_results$summary
  cat("Summary Statistics:\n", file = filename, append = TRUE)
  cat("  Participants:", summary_stats$n_participants, "\n", file = filename, append = TRUE)
  cat("  Mean ability:", round(summary_stats$mean_ability, 3), "\n", file = filename, append = TRUE)
  cat("  Ability SD:", round(summary_stats$sd_ability, 3), "\n", file = filename, append = TRUE)
  
  # Ability recovery
  recovery <- simulation_results$ability_recovery
  cat("\nAbility Recovery:\n", file = filename, append = TRUE)
  cat("  RMSE:", round(recovery$rmse, 3), "\n", file = filename, append = TRUE)
  cat("  Correlation:", round(recovery$correlation, 3), "\n", file = filename, append = TRUE)
  cat("  Mean bias:", round(recovery$bias, 3), "\n", file = filename, append = TRUE)
  
  # Item usage
  usage <- simulation_results$item_usage
  cat("\nItem Usage:\n", file = filename, append = TRUE)
  cat("  Total items:", length(usage), "\n", file = filename, append = TRUE)
  cat("  Items used:", sum(usage > 0), "\n", file = filename, append = TRUE)
  cat("  Mean usage:", round(mean(usage), 2), "\n", file = filename, append = TRUE)
  
  cat("\nSimulation report saved to:", filename, "\n")
}

# Generate report
generate_simulation_report(simulation_results)
}

}
\references{
van der Linden, W. J., & Glas, C. A. W. (Eds.). (2010). 
Elements of adaptive testing. Springer.
}
\seealso{
\itemize{
  \item \code{\link{detect_outlier_items}} for item quality assessment
  \item \code{\link{validate_item_bank}} for structural validation
  \item \code{\link{create_study_config}} for assessment configuration
  \item \code{\link{launch_study}} for actual assessment deployment
}
}
\keyword{adaptive-testing}
\keyword{performance-analysis}
\keyword{simulation}
\keyword{validation}
