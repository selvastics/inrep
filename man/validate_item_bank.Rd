% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/utils.R, R/validation.R
\name{validate_item_bank}
\alias{validate_item_bank}
\title{Validate Item Bank}
\usage{
validate_item_bank(item_bank, model = "GRM")

validate_item_bank(item_bank, model = "GRM")
}
\arguments{
\item{item_bank}{Data frame containing item parameters and content.
Structure and required columns vary by IRT model specification.}

\item{model}{Character string specifying IRT model for validation.
Options: \code{"1PL"}, \code{"2PL"}, \code{"3PL"}, \code{"GRM"}. Default: \code{"GRM"}.}
}
\value{
TRUE if valid, stops with an error otherwise.

Logical value: \code{TRUE} if item bank is valid for TAM processing,
  \code{FALSE} otherwise. Function will stop execution with descriptive error
  message if critical validation failures are detected.
}
\description{
Validates the structure and content of the item bank.

Validates the structure and content of an item bank for compatibility with
TAM package functions and the specified IRT model. Ensures that item parameters
and data structure meet TAM's requirements for statistical analysis and that
parameter values are within acceptable ranges for stable estimation.
}
\details{
\strong{TAM Compatibility Requirements:} This function ensures comprehensive
compatibility with TAM package specifications:

\strong{Structural Validation:}
\itemize{
  \item Validates required columns for TAM model fitting functions
  \item Checks data types and format consistency
  \item Ensures adequate sample size for parameter estimation
  \item Verifies no missing values in critical parameter columns
}

\strong{Parameter Range Validation:}
\itemize{
  \item Discrimination parameters (a): Must be positive, typically 0.2-3.0
  \item Difficulty parameters (b): Logit scale, typically -4.0 to +4.0
  \item Threshold parameters (b1, b2, ...): Must be in ascending order
  \item Guessing parameters (c): Must be between 0.0 and 1.0
  \item Response categories: Must be properly formatted and consistent
}

\strong{Model-Specific Requirements:}
\describe{
  \item{\strong{1PL/Rasch Model}}{
    Requires: \code{Question}, \code{b} (difficulty), response options.
    Validates: Difficulty parameter range, response coding consistency.
  }
  \item{\strong{2PL Model}}{
    Requires: \code{Question}, \code{a} (discrimination), \code{b}, response options.
    Validates: Positive discrimination, parameter interaction feasibility.
  }
  \item{\strong{3PL Model}}{
    Requires: \code{Question}, \code{a}, \code{b}, \code{c} (guessing), response options.
    Validates: Guessing parameter bounds, model identifiability.
  }
  \item{\strong{GRM (Graded Response Model)}}{
    Requires: \code{Question}, \code{a}, threshold parameters, \code{ResponseCategories}.
    Validates: Threshold ordering, response category consistency.
  }
}

\strong{Data Quality Checks:}
\itemize{
  \item Identifies potential estimation problems (extreme parameters)
  \item Warns about items with unusual parameter combinations
  \item Checks for duplicate items or parameter sets
  \item Validates response coding consistency across items
}

\strong{Cross-Format Compatibility:}
\itemize{
  \item Handles conversion between GRM and dichotomous formats
  \item Provides compatibility warnings for mixed formats
  \item Suggests appropriate model selection based on data structure
}

\code{inrep} uses this validation to ensure seamless data flow to TAM functions.
}
\examples{
\dontrun{
# Example 1: Validate BFI personality items for GRM
library(inrep)
data(bfi_items)

# Validate for GRM model
is_valid_grm <- validate_item_bank(bfi_items, "GRM")
cat("BFI items valid for GRM:", is_valid_grm, "\n")

# Example 2: Validate cognitive items for 2PL model
cognitive_items <- data.frame(
  Question = c("What is 2+2?", "What is 5*3?", "What is 10/2?"),
  a = c(1.2, 0.8, 1.5),
  b = c(-0.5, 0.2, -1.0),
  Option1 = c("2", "10", "3"),
  Option2 = c("3", "12", "4"),
  Option3 = c("4", "15", "5"),
  Option4 = c("5", "18", "6"),
  Answer = c("4", "15", "5")
)

# Validate for 2PL model
is_valid_2pl <- validate_item_bank(cognitive_items, "2PL")
cat("Cognitive items valid for 2PL:", is_valid_2pl, "\n")

# Example 3: Validate problematic item bank
problematic_items <- data.frame(
  Question = c("Item 1", "Item 2"),
  a = c(-0.5, 5.0),  # Negative discrimination, extreme value
  b = c(0.0, 10.0),  # Extreme difficulty
  Option1 = c("A", "A"),
  Option2 = c("B", "B"),
  Answer = c("A", "B")
)

# This should produce warnings or errors
tryCatch({
  is_valid_prob <- validate_item_bank(problematic_items, "2PL")
}, error = function(e) {
  cat("Validation failed as expected:", e$message, "\n")
})

# Example 4: Validate GRM with threshold checking
grm_items <- data.frame(
  Question = c("I am talkative", "I am reserved"),
  a = c(1.0, 1.2),
  b1 = c(-2.0, -1.5),
  b2 = c(-1.0, -0.5),
  b3 = c(0.0, 0.5),
  b4 = c(1.0, 1.5),
  ResponseCategories = c("1,2,3,4,5", "1,2,3,4,5")
)

# Validate threshold ordering
is_valid_grm_thresh <- validate_item_bank(grm_items, "GRM")
cat("GRM items with thresholds valid:", is_valid_grm_thresh, "\n")

# Example 5: Comprehensive validation with detailed output
detailed_validation <- function(item_bank, model) {
  cat("Validating item bank for model:", model, "\n")
  cat("Number of items:", nrow(item_bank), "\n")
  cat("Available columns:", paste(names(item_bank), collapse = ", "), "\n")
  
  result <- tryCatch({
    validate_item_bank(item_bank, model)
  }, error = function(e) {
    cat("ERROR:", e$message, "\n")
    return(FALSE)
  }, warning = function(w) {
    cat("WARNING:", w$message, "\n")
    return(TRUE)
  })
  
  if (result) {
    cat("✓ Item bank is valid for", model, "model\n")
  } else {
    cat("✗ Item bank validation failed\n")
  }
  
  return(result)
}

# Test with different models
detailed_validation(bfi_items, "GRM")
detailed_validation(cognitive_items, "2PL")
}

}
\references{
\itemize{
  \item Robitzsch, A., Kiefer, T., & Wu, M. (2020). \emph{TAM: Test Analysis Modules}. 
    R package version 3.5-19. \url{https://CRAN.R-project.org/package=TAM}
  \item Samejima, F. (1969). Estimation of latent ability using a response pattern of 
    graded scores. \emph{Psychometrika Monograph Supplement}, 34(4), 100-114.
  \item Birnbaum, A. (1968). Some latent trait models and their use in inferring an 
    examinee's ability. In F. M. Lord & M. R. Novick (Eds.), 
    \emph{Statistical theories of mental test scores} (pp. 397-479). Addison-Wesley.
}
}
\seealso{
\itemize{
  \item \code{\link{create_study_config}} for configuring models that use validated item banks
  \item \code{\link{launch_study}} for using validated item banks in assessments
  \item \code{\link[TAM]{tam.mml}} for TAM model fitting functions
}
}
