% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/launch_study.R
\name{launch_study}
\alias{launch_study}
\title{Launch Adaptive Study Interface}
\usage{
launch_study(
  config,
  item_bank,
  custom_css = NULL,
  theme_config = NULL,
  webdav_url = NULL,
  password = NULL,
  save_format = "rds",
  logger = function(msg, ...) message(msg),
  study_key = NULL,
  accessibility = FALSE,
  admin_dashboard_hook = NULL,
  max_session_time = 7200,
  session_save = TRUE,
  data_preservation_interval = 30,
  keep_alive_interval = 10,
  enable_error_recovery = TRUE,
  debug_mode = FALSE,
  ui_render_delay = NULL,
  package_loading_delay = NULL,
  session_init_delay = NULL,
  show_loading_screen = NULL,
  immediate_ui = FALSE,
  auto_close_time = 300,
  auto_close_time_unit = "seconds",
  disable_auto_close = FALSE,
  port = 3838,
  launch_browser = FALSE,
  host = "127.0.0.1",
  ...
)
}
\arguments{
\item{config}{A list containing study configuration parameters created by \code{\link{create_study_config}}.
Must include essential elements like \code{model}, \code{max_items}, \code{min_SEM}, etc.}

\item{item_bank}{Data frame containing item parameters compatible with TAM package requirements.
Column structure varies by IRT model (see \strong{Item Bank Requirements} section).}

\item{custom_css}{Character string containing CSS code for UI customization. 
When provided, overrides both built-in themes and \code{theme_config} settings.}

\item{theme_config}{Named list of theme parameters for custom theming.
Contains CSS variable definitions like \code{primary_color}, \code{font_family}, etc.}

\item{webdav_url}{Character string specifying WebDAV URL for cloud-based result storage,
or \code{NULL} to disable cloud functionality. When provided, \code{password} must also be specified.
Example URLs: \code{"https://sync.academiccloud.de/index.php/s/YourSharedFolder/"} or 
\code{"https://your-institution.edu/webdav/studies/"}. Both \code{webdav_url} and \code{password}
are required together for cloud storage functionality.}

\item{password}{Character string for WebDAV authentication. Required when \code{webdav_url} is specified.
This should be the access password or token for your WebDAV storage endpoint. 
For security, consider using environment variables: \code{Sys.getenv("WEBDAV_PASSWORD")}.}

\item{save_format}{Character string specifying output format for assessment results.
Options: \code{"rds"} (default), \code{"csv"}, \code{"json"}, \code{"pdf"}.}

\item{logger}{Function for custom logging. Default uses internal \code{logr} implementation.
Should accept \code{message} and \code{level} parameters.}

\item{study_key}{Character string for unique study identification. Overrides config$study_key.}

\item{accessibility}{Logical indicating whether to enable accessibility features
including ARIA labels, keyboard navigation, and screen reader support.}

\item{admin_dashboard_hook}{Optional function receiving real-time assessment updates.
Called with participant progress, ability estimates, and session metrics.}

\item{max_session_time}{Maximum session time in seconds (default: 7200 = 2 hours).
The assessment will automatically terminate after this time to limit session duration.}

\item{session_save}{Logical indicating whether to enable session saving and recovery.}

\item{data_preservation_interval}{Interval for automatic data preservation in seconds (default: 30).}

\item{keep_alive_interval}{Keep-alive ping interval in seconds (default: 10).}

\item{enable_error_recovery}{Logical indicating whether to enable automatic error recovery
with up to 3 recovery attempts before graceful degradation.}

\item{debug_mode}{Logical indicating whether to enable debug mode (default: FALSE).
When TRUE, enables keyboard shortcuts for rapid testing: STRG+A (CTRL+A) smart fills current page with
contextual defaults, STRG+Q (CTRL+Q) turbo auto-fills all pages until results are reached.
A red debug indicator appears in the bottom-right corner. **Use only for development/testing!**}

\item{ui_render_delay}{Optional numeric delay (in seconds) before rendering the main UI.
If NULL, no additional delay is applied.}

\item{package_loading_delay}{Optional numeric delay (in seconds) used when deferring
package loading for immediate UI startup.}

\item{session_init_delay}{Optional numeric delay (in seconds) before initializing
session state.}

\item{show_loading_screen}{Logical indicating whether to show a simple loading
screen when using delayed startup.}

\item{immediate_ui}{Logical indicating whether to render the UI immediately and
load heavier components in the background.}

\item{auto_close_time}{Numeric. Time until auto-close after the final results page.
Used only for custom page flows that include results pages.}

\item{auto_close_time_unit}{Character. Either \code{"seconds"} or \code{"minutes"}.}

\item{disable_auto_close}{Logical. If TRUE, disables automatic closing.}

\item{port}{Numeric port number for Shiny application (default: 3838).
The application will be accessible at http://host:port.}

\item{launch_browser}{Logical indicating whether to automatically open browser (default: FALSE).
When TRUE, automatically launches in browser. When FALSE, returns the Shiny app object for manual execution.}

\item{host}{Character string specifying the host address (default: "127.0.0.1").
Use "0.0.0.0" for network access or specific IP addresses for remote access.}

\item{...}{Additional parameters passed to Shiny application configuration.}
}
\value{
When \code{launch_browser = TRUE}, launches the Shiny application
  in the default browser. When \code{launch_browser = FALSE} (default), returns the Shiny app
  object for manual execution with \code{shiny::runApp()}.
  The app provides an assessment interface with optional adaptation.
}
\description{
Implementation note: currently implemented as a single function and will be
refactored into smaller internal helpers.
Launches a Shiny-based adaptive or non-adaptive assessment interface that serves as
a wrapper around optional psychometric backends (for example, TAM). When available,
IRT computations (ability estimation, item selection, model fitting) are delegated to
the backend, while this function provides the interactive interface and workflow
management.
}
\details{
\strong{Psychometric Foundation:} All statistical computations are performed by the
TAM package (Robitzsch et al., 2024). \code{inrep} serves as an integration framework
that orchestrates TAM's capabilities within an interactive research workflow:
\itemize{
  \item IRT model fitting: \code{TAM::tam.mml}, \code{TAM::tam.mml.2pl}, \code{TAM::tam.mml.3pl}
  \item Ability estimation: \code{TAM::tam.wle}
  \item Item information: \code{TAM::IRT.informationCurves}
  \item Model diagnostics: \code{TAM::tam.fit}
}

\strong{Framework Architecture:} \code{inrep} provides the following integration capabilities:
\itemize{
  \item Interactive web interface powered by Shiny (Chang et al., 2021)
  \item Real-time data collection and session management
  \item Bidirectional interface between user interactions and TAM computations
  \item Workflow orchestration with comprehensive logging via \code{logr} package
  \item Result export in multiple formats with cloud storage integration
}

\strong{Capabilities:}
\itemize{
  \item Runs a Shiny-based assessment flow (fixed or adaptive)
  \item Optional demographics collection
  \item Ability estimation and item selection via optional psychometric backends (e.g., TAM)
  \item Optional session save/restore helpers
  \item Optional logging when \code{logr} is available
}
}
\section{Cloud Storage Configuration}{

Optional upload of completed session data to a WebDAV-compatible endpoint.

\strong{Setup Requirements:}
\itemize{
  \item Both \code{webdav_url} and \code{password} must be provided together
  \item WebDAV URL must be a valid HTTP(S) endpoint with write permissions
  \item Password should be the access token or credential for your WebDAV service
  \item Network connectivity required for cloud functionality
}

\strong{Operational Notes:}
\itemize{
  \item Use environment variables for passwords: \code{password = Sys.getenv("WEBDAV_PASS")}
  \item Prefer HTTPS endpoints
  \item Use dedicated access tokens rather than account passwords when possible
}

\strong{Usage Examples:}
\preformatted{
# Local storage only (default)
launch_study(config, item_bank)

# With cloud backup
launch_study(
  config, 
  item_bank,
  webdav_url = "https://sync.academiccloud.de/index.php/s/YourFolder/",
  password = Sys.getenv("WEBDAV_PASSWORD")
)
}
}

\section{Installation and Dependencies}{

\strong{Required Packages:} Ensure all dependencies are installed for full functionality:
\preformatted{
# Core psychometric engine
install.packages("TAM")

# Interface and visualization  
install.packages(c("shiny", "DT", "ggplot2", "plotly"))

# Data processing and utilities
install.packages(c("dplyr", "jsonlite", "logr"))

# Install inrep package
devtools::install_github("selvastics/inrep")
}

\strong{System Requirements:}
\itemize{
  \item R version 4.0.0 or higher for optimal TAM compatibility
  \item Minimum 4GB RAM for medium-scale assessments (>500 participants)
  \item Modern web browser with JavaScript enabled for Shiny interface
  \item Network connectivity for cloud storage features (optional)
}
}

\section{Notes}{

Most runtime behavior is configured via \code{create_study_config()} (e.g.,
caching/parallel settings, theme options, progress display). For WebDAV upload
behavior and security notes, see \code{save_session_to_cloud()}.
}

\section{Item Bank Requirements}{

The \code{item_bank} data frame must conform to TAM package specifications with 
columns varying by IRT model type:

\strong{Common Requirements (All Models):}
\itemize{
  \item \code{Question}: Character vector containing item text or content identifiers
  \item Items must be properly formatted for the target language and population
  \item No missing values in parameter columns required by the specified model
}

\strong{Model-Specific Requirements:}
\describe{
  \item{\strong{1PL/Rasch Model}}{
    \itemize{
      \item \code{b}: Difficulty parameters (logit scale, typically -3 to +3)
      \item \code{Answer}: Correct response codes for scoring
      \item \code{Option1, Option2, ...}: Response options for multiple choice items
    }
  }
  \item{\strong{2PL Model}}{
    \itemize{
      \item \code{a}: Discrimination parameters (positive values, typically 0.5 to 3.0)
      \item \code{b}: Difficulty parameters (logit scale)
      \item \code{Answer}: Correct response identifiers
      \item \code{Option1, Option2, ...}: Multiple choice response options
    }
  }
  \item{\strong{3PL Model}}{
    \itemize{
      \item \code{a}: Discrimination parameters (positive values)
      \item \code{b}: Difficulty parameters (logit scale)  
      \item \code{c}: Guessing parameters (0 to 1, typically 0.1 to 0.3)
      \item \code{Answer}: Correct response codes
      \item \code{Option1, Option2, ...}: Distractor options
    }
  }
  \item{\strong{GRM (Graded Response Model)}}{
    \itemize{
      \item \code{a}: Discrimination parameters for polytomous items
      \item \code{b1, b2, b3, ...}: Threshold parameters in ascending order
      \item \code{ResponseCategories}: Comma-separated response scale (e.g., "1,2,3,4,5")
      \item Optional: \code{CategoryLabels}: Descriptive labels for scale points
    }
  }
}

\strong{Parameter Validation:} The function automatically validates:
\itemize{
  \item Parameter ranges appropriate for TAM estimation procedures
  \item Threshold ordering for polytomous models (b1 < b2 < b3 < ...)
  \item Consistency between model specification and available parameters
  \item Data types and missing value patterns that could affect TAM computations
}
}

\examples{
\dontrun{
# Example 1: Basic Personality Assessment with GRM
library(inrep)
data(bfi_items)

# Create basic configuration
basic_config <- create_study_config(
  name = "Big Five Personality Assessment",
  model = "GRM",
  max_items = 15,
  min_SEM = 0.3,
  demographics = c("Age", "Gender", "Education"),
  theme = "Light",
  language = "en"
)

# Launch assessment with default settings
launch_study(basic_config, bfi_items)

# Example 2: Advanced Cognitive Assessment with 2PL Model
advanced_config <- create_study_config(
  name = "Cognitive Ability Assessment",
  model = "2PL", 
  estimation_method = "EAP",
  max_items = 20,
  min_items = 10,
  min_SEM = 0.25,
  criteria = "MI",  # Maximum Information selection
  theta_prior = c(0, 1),
  demographics = c("Age", "Gender", "Education", "Native_Language"),
  input_types = list(
    Age = "numeric",
    Gender = "select", 
    Education = "select",
    Native_Language = "text"
  ),
  theme = "Professional",
  session_save = TRUE,
  parallel_computation = TRUE,
  cache_enabled = TRUE,
  accessibility_enhanced = TRUE
)

# Launch with accessibility features and admin monitoring
launch_study(
  config = advanced_config,
  item_bank = cognitive_items,
  accessibility = TRUE,
  admin_dashboard_hook = function(session_data) {
    cat("Participant ID:", session_data$participant_id, "\n")
    cat("Progress:", session_data$progress, "\%\n")
    cat("Current theta:", round(session_data$theta, 3), "\n")
    cat("Standard error:", round(session_data$se, 3), "\n")
  }
)

# Example 3: Custom Theme with CSS Variables
custom_theme_config <- list(
  primary_color = "#2E86AB",
  secondary_color = "#A23B72", 
  background_color = "#F5F5F5",
  text_color = "#333333",
  font_family = "'Segoe UI', Tahoma, Geneva, Verdana, sans-serif",
  border_radius = "8px",
  button_hover_color = "#1E5A6B"
)

launch_study(
  config = basic_config,
  item_bank = bfi_items, 
  theme_config = custom_theme_config
)

# Example 4: Clinical Assessment Example
clinical_config <- create_study_config(
  name = "Clinical Depression Screening",
  model = "GRM",
  max_items = 12,
  min_SEM = 0.35,
  demographics = c("Age", "Gender", "Previous_Treatment"),
  theme = "Clinical",
  language = "en",
  session_save = TRUE,
  max_session_duration = 30
)

# Launch with cloud storage and logging
launch_study(
  config = clinical_config,
  item_bank = depression_items,
  save_format = "json",
  webdav_url = "https://your-webdav.example/assessments/",
  password = Sys.getenv("WEBDAV_PASSWORD"),
  logger = function(msg, level = "INFO") {
    timestamp <- format(Sys.time(), "\%Y-\%m-\%d \%H:\%M:\%S")
    cat(sprintf("[\%s] \%s: \%s\n", timestamp, level, msg))
  }
)

# Example 5: Research Study with Complete Customization
research_config <- create_study_config(
  name = "Psychometric Validation Study",
  model = "3PL",
  estimation_method = "EAP",
  min_items = 15,
  max_items = 30,
  min_SEM = 0.2,
  criteria = "WEIGHTED",
  theta_prior = c(0, 1.2),
  demographics = c("Age", "Gender", "Education", "Country", "Language"),
  response_ui_type = "radio",
  progress_style = "modern-circle",
  theme = "Research",
  language = "en",
  session_save = TRUE,
  parallel_computation = TRUE,
  feedback_enabled = TRUE,
  recommendation_fun = function(theta, demographics, responses) {
    if (theta > 1.0) {
      return(c("Excellent performance", "Consider advanced materials"))
    } else if (theta > 0) {
      return(c("Good performance", "Continue current approach"))
    } else {
      return(c("Additional support recommended", "Review fundamentals"))
    }
  }
)

# Example 6: University of Hildesheim theme with cloud storage
hildesheim_config <- create_study_config(
  name = "University of Hildesheim Assessment",
  model = "GRM",
  max_items = 10,
  session_save = TRUE,
  theme = "Berry"
)

launch_study(
  config = hildesheim_config,
  item_bank = bfi_items,
  save_format = "json",
  webdav_url = "https://sync.academiccloud.de/index.php/s/Y51QPXzJVLWSAcb",
  password = "inreptest",
  study_key = paste0("HILDESHEIM_", UUIDgenerate())
)
}
}
