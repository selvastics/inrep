% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/core_utils.R
\name{resume_session}
\alias{resume_session}
\title{Resume Assessment Session from Local Storage}
\usage{
resume_session(file_path)
}
\arguments{
\item{file_path}{Character string specifying the path to a JSON file.
The file may also contain base64-encoded JSON for legacy backups.}
}
\value{
A comprehensive list containing restored session data, or \code{NULL} if restoration fails:
\describe{
  \item{\code{study_key}}{Original study identifier}
  \item{\code{timestamp}}{Original session timestamp}
  \item{\code{cat_result}}{TAM-derived assessment results and statistics}
  \item{\code{demographics}}{Participant demographic information}
  \item{\code{response_times}}{Item-level response times in seconds}
  \item{\code{theta_history}}{Complete ability estimate progression}
  \item{\code{se_history}}{Standard error progression across items}
  \item{\code{restored_at}}{Restoration timestamp for audit trail}
}
}
\description{
Reads session data from a file created by \code{save_session_to_cloud()}.
Supports plain JSON and (legacy) base64-encoded JSON.
}
\details{
The function first tries to parse the file as JSON. If that fails, it falls
back to base64-decoding the file contents (requires the \code{base64enc}
package) and parsing the decoded text as JSON.
}
\section{File Format}{

Supported file formats:
\itemize{
  \item Plain JSON (recommended)
  \item Base64-encoded JSON (legacy)
}
}

\section{Error Handling}{

Function returns \code{NULL} and logs detailed error information for:
\itemize{
  \item File accessibility issues (permissions, network, corruption)
  \item Decryption failures (wrong format, corrupted data)
  \item JSON parsing errors (malformed structure)
  \item Data validation failures (missing required fields)
}
}

\examples{
\dontrun{
# Resume from local file
session_data <- resume_session("path/to/STUDY2024_001_20241201_143022.json")

if (!is.null(session_data)) {
  # Successful restoration
  cat("Study:", session_data$study_key, "\n")
  cat("Original session:", session_data$timestamp, "\n")
  cat("Final ability:", session_data$cat_result$final_theta, "\n")
  cat("Items administered:", length(session_data$theta_history), "\n")
  
  # Continue assessment or analyze results
  if (is.null(session_data$cat_result)) {
    message("Incomplete session - can be continued")
  } else {
    message("Complete session - analyze results")
  }
} else {
  warning("Session restoration failed - check file integrity")
}

# Resume from downloaded cloud file
cloud_file <- "downloads/research_session_backup.json"
restored_session <- resume_session(cloud_file)

# Validate restored data before proceeding
if (!is.null(restored_session) && 
    !is.null(restored_session$theta_history) &&
    length(restored_session$theta_history) > 0) {
  message("Valid session data restored - proceeding with analysis")
}
}

}
\references{
Robitzsch, A., Kiefer, T., & Wu, M. (2020). \emph{TAM: Test Analysis Modules}. 
R package version 3.5-19. \url{https://CRAN.R-project.org/package=TAM}
}
\seealso{
\code{\link{save_session_to_cloud}} for creating session backup files,
\code{\link{validate_session}} for session validation,
\code{\link{init_reactive_values}} for new session initialization,
\code{\link{create_study_config}} for configuration setup
}
